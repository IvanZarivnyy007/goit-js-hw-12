{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com';\nconst END_POINT = '/api/';\n\nconst instance = axios.create({\n  baseURL: BASE_URL,\n  timeout: 1000,\n});\n\nexport function getImages(searchParams, page) {\n  const value = searchParams.trim();\n  console.log({ value });\n  if (value) {\n    return instance.get(END_POINT, {\n      params: {\n        key: '42279202-5e6657fc85e4b10c09189e202',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        q: value,\n        page: page,\n        per_page: 15,\n      },\n    });\n  } else {\n    return Promise.reject();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages } from './pixabay-api';\n\nconst searchInput = document.querySelector('#search-input');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('.loader');\nconst navigationForm = document.querySelector('.navigation');\nconst moreButton = document.querySelector('#more');\nconst msg = document.getElementById('message');\n\nexport const refs = {\n  searchInput,\n  gallery,\n  loader,\n  navigationForm,\n  moreButton,\n  msg,\n};\n\nexport const serviceVars = { PAGE: 1, SEARCH_WORD: '' };\n\nexport const lightbox = new SimpleLightbox(\n  '#gallery .gallery-item .gallery-link ',\n  {\n    dowload: false,\n    close: true,\n    closeText: 'Ã—',\n    captions: true,\n    captionsData: 'alt',\n    captionType: 'attr',\n    captionDelay: 250,\n    captionSelector: 'img',\n  }\n);\n\nexport async function getGallery(value, page) {\n  serviceVars.SEARCH_WORD = value;\n  closeMoreButton();\n  showLoder();\n  try {\n    const { data } = await getImages(value, page);\n    arrLengthChecker(data.hits) && !value.length;\n    const galleryTemplate = data.hits\n      .map(hit => {\n        return `<div class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n  </a>\n  <div class=\"image-info\">\n      <div><b>Likes</b> ${hit.likes}</div>\n      <div><b>Views</b> ${hit.views}</div>\n      <div><b>Comments</b> ${hit.comments}</div>\n      <div><b>Downloads</b> ${hit.downloads}</div>\n  </div>\n  </div>`;\n      })\n      .join('');\n    closeLoder();\n    showMoreButton();\n\n    if (!data.hits.length && data.total) {\n      closeLoder();\n      closeMoreButton();\n      // msg.style.display = 'inline-block';\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n        title: '',\n        color: 'blue',\n      });\n    }\n\n    if (page === 1) {\n      gallery.innerHTML = galleryTemplate;\n    } else {\n      gallery.innerHTML += galleryTemplate;\n\n      window.scrollBy({\n        behavior: 'smooth',\n        top:\n          Math.ceil(gallery.firstElementChild.getBoundingClientRect().height) *\n          6,\n      });\n    }\n\n    lightbox.refresh();\n  } catch (error) {\n    closeLoder();\n    iziToast.show({\n      message: `\"Sorry, there are no images matching your search query. Please try again!\"`,\n      position: 'topRight',\n      title: '',\n      color: 'red',\n    });\n  }\n\n  closeLoder();\n  searchInput.value = '';\n}\n\nexport function showLoder() {\n  refs.loader.style.display = 'inline-block';\n}\n\nexport function closeLoder() {\n  refs.loader.style.display = 'none';\n}\n\nexport function showMoreButton() {\n  refs.moreButton.style.display = 'inline-block';\n}\n\nexport function closeMoreButton() {\n  refs.moreButton.style.display = 'none';\n}\n\nexport function arrLengthChecker(arr) {\n  if (!arr.length) {\n    closeMoreButton();\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      title: '',\n      color: 'red',\n    });\n  }\n}\n","import { refs, getGallery, serviceVars } from './js/render-functions';\n\nrefs.navigationForm.addEventListener('submit', e => {\n  e.preventDefault();\n  serviceVars.PAGE = 1;\n  getGallery(refs.searchInput.value, serviceVars.PAGE);\n  serviceVars.PAGE += 1;\n});\nrefs.moreButton.addEventListener('click', () => {\n  getGallery(serviceVars.SEARCH_WORD, serviceVars.PAGE);\n  serviceVars.PAGE += 1;\n});\n"],"names":["BASE_URL","END_POINT","instance","axios","getImages","searchParams","page","value","searchInput","gallery","loader","navigationForm","moreButton","msg","refs","serviceVars","lightbox","SimpleLightbox","getGallery","closeMoreButton","showLoder","data","arrLengthChecker","galleryTemplate","hit","closeLoder","showMoreButton","iziToast","arr","e"],"mappings":"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"}